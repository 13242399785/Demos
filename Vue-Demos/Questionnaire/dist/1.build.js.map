{"version":3,"sources":["webpack:///1.build.js","webpack:///Calendar.vue?9541","webpack:///./src/components/Calendar.vue?e3d9*","webpack:///./src/components/Calendar.vue?e1f5*","webpack:///./src/components/Calendar.vue?be8f","webpack:///./src/components/Calendar.vue?9d17*","webpack:///Edit.vue","webpack:///./src/components/Edit.vue?ce79","webpack:///./src/components/Edit.vue"],"names":["webpackJsonp","4","module","exports","Object","defineProperty","value","date","Date","props","data","weekList","currentYear","getFullYear","currentMonth","getMonth","computed","yearList","i","push","monthList","tableData","currentDateList","this","oneDayMilliseconds","dateWeek","getDay","firstDate","getTime","m","methods","incrMonth","decrMonth","handleClick","event","target","dataset","_date","parseInt","$dispatch","showCalendar","6","__webpack_require__","id","7","8","__vue_script__","__vue_template__","__esModule","options","template","9","content","locals","17","_interopRequireDefault","obj","default","_stringify","_stringify2","_Calendar","_Calendar2","showSelections","showMask","questItem","typeMap","radio","checkbox","textarea","addItem","nodeName","toLowerCase","type","handleInput","itemTitle","$els","itemSelections","operation","addTextarea","addSelections","handleCancel","trim","title","questionnaire","questItemList","selections","split","name","now","handleItemOperation","moveUp","moveDown","removeQuestItem","reuseQuestItem","Error","index","indexOf","$remove","splice","newQuestItem","JSON","parse","submit","alert","length","deadline","save","publish","components","Calendar","events","date-change","msg","toLocaleDateString","vuex","actions","_ref","dispatch","state","$router","go","_ref2","setCurrentQuest","_ref3","item","getters","currentQuestionnaire","questionnaireList","route","_ref4","_this","to","next","params","questId","forEach","32","39"],"mappings":"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","file":"1.build.js","sourcesContent":["webpackJsonp([1,4],{\n\n/***/ 4:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar date = new Date();\n\t\n\texports.default = {\n\t    props: ['showCalendar'],\n\t    data: function data() {\n\t        return {\n\t            weekList: ['日', '一', '二', '三', '四', '五', '六'],\n\t            currentYear: date.getFullYear(),\n\t            currentMonth: date.getMonth() + 1\n\t        };\n\t    },\n\t\n\t    computed: {\n\t        yearList: function yearList() {\n\t            var yearList = [];\n\t            for (var i = 1900; i < 2051; i++) {\n\t                yearList.push(i);\n\t            }\n\t            return yearList;\n\t        },\n\t        monthList: function monthList() {\n\t            var monthList = [];\n\t            for (var i = 1; i <= 12; i++) {\n\t                monthList.push(i);\n\t            }\n\t            return monthList;\n\t        },\n\t        tableData: function tableData() {\n\t            var currentDateList = [];\n\t            var date = new Date(this.currentYear, this.currentMonth - 1, 1);\n\t            var oneDayMilliseconds = 24 * 60 * 60 * 1000;\n\t            var dateWeek = date.getDay();\n\t            var firstDate = date.getTime() - dateWeek * oneDayMilliseconds;\n\t            for (var i = 0; i < 6; i++) {\n\t                currentDateList[i] = [];\n\t                for (var m = 0; m < 7; m++) {\n\t                    currentDateList[i].push(new Date(firstDate));\n\t                    firstDate += oneDayMilliseconds;\n\t                }\n\t            }\n\t            return currentDateList;\n\t        }\n\t    },\n\t    methods: {\n\t        incrMonth: function incrMonth() {\n\t            if (this.currentMonth === 12) {\n\t                this.currentMonth = 1;\n\t                this.currentYear++;\n\t            } else {\n\t                this.currentMonth++;\n\t            }\n\t        },\n\t        decrMonth: function decrMonth() {\n\t            if (this.currentMonth === 1) {\n\t                this.currentMonth = 12;\n\t                this.currentYear--;\n\t            } else {\n\t                this.currentMonth--;\n\t            }\n\t        },\n\t        handleClick: function handleClick(event) {\n\t            if (event.target.dataset.date) {\n\t                var _date = new Date(parseInt(event.target.dataset.date));\n\t                this.currentYear = _date.getFullYear();\n\t                this.currentMonth = _date.getMonth() + 1;\n\t\n\t                this.$dispatch(\"date-change\", _date);\n\t                this.showCalendar = false;\n\t            }\n\t        }\n\t    }\n\t};\n\n/***/ },\n\n/***/ 6:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(1)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"#calendar{width:300px;border:1px solid #ccc;border-radius:3px;box-sizing:border-box;padding:10px;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#calendar .calendar-selections{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%;height:30px}#calendar .calendar-selections span{display:inline-block;height:24px;line-height:24px;cursor:pointer}#calendar .calendar-selections_month,#calendar .calendar-selections_year{width:90px;height:24px}#calendar .calendar-selections_month option,#calendar .calendar-selections_year option,#calendar table{text-align:center}#calendar table{width:100%;border-collapse:collapse}#calendar table,#calendar td,#calendar th{border:none}#calendar tr{height:26px}#calendar td{cursor:pointer;-webkit-transition:background-color .2s;transition:background-color .2s}#calendar td:hover{background-color:#cce5ff}#calendar .not-current-month{color:#aaa}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 7:\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div id=calendar> <div class=calendar-selections> <span class=calendar-selections_last @click=decrMonth> <i class=\\\"fa fa-chevron-left\\\"></i> </span> <select name=year class=calendar-selections_year v-model=currentYear> <option v-for=\\\"year in yearList\\\">{{year}}</option> </select> <select class=calendar-selections_month v-model=currentMonth> <option v-for=\\\"month in monthList\\\">{{month}}</option> </select> <span class=calendar-selelctions_next @click=incrMonth> <i class=\\\"fa fa-chevron-right\\\"></i> </span> </div> <table @click.stop=handleClick($event)> <thead> <tr><th v-for=\\\"week in weekList\\\">{{week}}</th></tr> </thead> <tbody> <tr v-for=\\\"row in tableData\\\"> <td v-for=\\\"date in row\\\" :class=\\\"{'not-current-month': date.getMonth()!==currentMonth-1}\\\" :data-date=date.getTime()> {{date.getDate()}} </td> </tr> </tbody> </table> </div> \";\n\n/***/ },\n\n/***/ 8:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(9)\n\t__vue_script__ = __webpack_require__(4)\n\t__vue_template__ = __webpack_require__(7)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n\n/***/ 9:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(6);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(2)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/.npminstall/css-loader/0.23.1/css-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./../../node_modules/.npminstall/less-loader/2.2.3/less-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./Calendar.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/.npminstall/css-loader/0.23.1/css-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./../../node_modules/.npminstall/less-loader/2.2.3/less-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./Calendar.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 17:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(5);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _Calendar = __webpack_require__(8);\n\t\n\tvar _Calendar2 = _interopRequireDefault(_Calendar);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t    data: function data() {\n\t        return {\n\t            showSelections: false,\n\t            showMask: false,\n\t            showCalendar: false,\n\t            questItem: {},\n\t            typeMap: {\n\t                radio: '单选',\n\t                checkbox: '多选',\n\t                textarea: '问答'\n\t            }\n\t        };\n\t    },\n\t\n\t    methods: {\n\t        addItem: function addItem(event) {\n\t            var target = event.target;\n\t            if (target.nodeName.toLowerCase() === 'span') {\n\t                this.showMask = true;\n\t                this.questItem.type = target.dataset.type;\n\t            }\n\t        },\n\t        handleInput: function handleInput(event) {\n\t            var target = event.target;\n\t            if (target.nodeName.toLowerCase() !== 'button') {\n\t                return;\n\t            }\n\t            var itemTitle = this.$els.itemTitle;\n\t            var itemSelections = this.$els.itemSelections;\n\t            if (target.dataset.operation === \"confirm\") {\n\t                if (this.questItem.type === \"textarea\") {\n\t                    this.addTextarea(itemTitle);\n\t                } else {\n\t                    this.addSelections(itemTitle, itemSelections);\n\t                }\n\t            } else {\n\t                this.handleCancel();\n\t            }\n\t        },\n\t        addTextarea: function addTextarea(itemTitle) {\n\t            if (itemTitle.value.trim() === '') {\n\t                return;\n\t            }\n\t            this.questItem.title = itemTitle.value.trim();\n\t            this.questionnaire.questItemList.push(this.questItem);\n\t            this.handleCancel();\n\t        },\n\t        addSelections: function addSelections(itemTitle, itemSelections) {\n\t            if (itemTitle.value.trim() === '' || itemSelections.value.trim() === '') {\n\t                return;\n\t            }\n\t            this.questItem.title = itemTitle.value.trim();\n\t            this.questItem.selections = itemSelections.value.trim().split(/\\s+/);\n\t            this.questItem.name = Date.now();\n\t            this.questionnaire.questItemList.push(this.questItem);\n\t            this.handleCancel();\n\t        },\n\t        handleCancel: function handleCancel() {\n\t            this.$els.itemTitle.value = '';\n\t            this.$els.itemSelections.value = '';\n\t            this.questItem = {};\n\t            this.showMask = false;\n\t        },\n\t        handleItemOperation: function handleItemOperation(event, questItem) {\n\t            var operation = event.target.dataset.operation;\n\t            switch (operation) {\n\t                case 'up':\n\t                    this.moveUp(questItem);\n\t                    break;\n\t                case 'down':\n\t                    this.moveDown(questItem);\n\t                    break;\n\t                case 'remove':\n\t                    this.removeQuestItem(questItem);\n\t                    break;\n\t                case 'reuse':\n\t                    this.reuseQuestItem(questItem);\n\t                    break;\n\t                default:\n\t                    throw new Error(\"该操作\" + \"operation\" + \"不存在！\");\n\t            }\n\t        },\n\t        moveUp: function moveUp(questItem) {\n\t            var index = this.questionnaire.questItemList.indexOf(questItem);\n\t            this.questionnaire.questItemList.$remove(questItem);\n\t            this.questionnaire.questItemList.splice(index - 1, 0, questItem);\n\t        },\n\t        moveDown: function moveDown(questItem) {\n\t            var index = this.questionnaire.questItemList.indexOf(questItem);\n\t            this.moveUp(this.questionnaire.questItemList[index + 1]);\n\t        },\n\t        removeQuestItem: function removeQuestItem(questItem) {\n\t            this.questionnaire.questItemList.$remove(questItem);\n\t        },\n\t        reuseQuestItem: function reuseQuestItem(questItem) {\n\t            var index = this.questionnaire.questItemList.indexOf(questItem);\n\t\n\t            var newQuestItem = JSON.parse((0, _stringify2.default)(questItem));\n\t            if (newQuestItem.type !== 'textarea') {\n\t                newQuestItem.name = Date.now();\n\t            }\n\t            this.questionnaire.questItemList.splice(index + 1, 0, newQuestItem);\n\t        },\n\t        submit: function submit(event) {\n\t            var operation = event.target.dataset.operation;\n\t            var oneDayTime = 24 * 60 * 60 * 1000;\n\t            if (this.questionnaire.title.trim() === '') {\n\t                alert(\"问卷的标题不能为空！\");\n\t                return;\n\t            }\n\t            if (this.questionnaire.questItemList.length === 0) {\n\t                alert(\"请至少设置一个问题！\");\n\t                return;\n\t            }\n\t            if (!this.questionnaire.deadline || this.questionnaire.deadline < Date.now()) {\n\t                alert(\"问卷的截止时间必须在今天之后！\");\n\t                return;\n\t            }\n\t            if (operation === 'save') {\n\t                this.save();\n\t            } else {\n\t                this.publish();\n\t            }\n\t        }\n\t    },\n\t    components: {\n\t        Calendar: _Calendar2.default\n\t    },\n\t    events: {\n\t        'date-change': function dateChange(msg) {\n\t            var date = new Date(msg);\n\t            this.$els.deadline.value = date.toLocaleDateString();\n\t            this.questionnaire.deadline = date.getTime();\n\t        }\n\t    },\n\t    vuex: {\n\t        actions: {\n\t            save: function save(_ref) {\n\t                var dispatch = _ref.dispatch;\n\t\n\t                this.questionnaire.state = \"未发布\";\n\t                dispatch('UPDATE_QUEST', this.questionnaire);\n\t                this.$router.go('/preview/' + this.questionnaire.id);\n\t            },\n\t            publish: function publish(_ref2) {\n\t                var dispatch = _ref2.dispatch;\n\t\n\t                this.questionnaire.state = \"已发布\";\n\t                dispatch('UPDATE_QUEST', this.questionnaire);\n\t                this.$router.go('/preview/' + this.questionnaire.id);\n\t            },\n\t            setCurrentQuest: function setCurrentQuest(_ref3, item) {\n\t                var dispatch = _ref3.dispatch;\n\t\n\t                dispatch(\"SET_QUEST\", item);\n\t            }\n\t        },\n\t        getters: {\n\t            questionnaire: function questionnaire(state) {\n\t                return state.currentQuestionnaire;\n\t            },\n\t            questionnaireList: function questionnaireList(state) {\n\t                return state.questionnaireList;\n\t            }\n\t        }\n\t    },\n\t    route: {\n\t        data: function data(_ref4) {\n\t            var _this = this;\n\t\n\t            var to = _ref4.to;\n\t            var next = _ref4.next;\n\t\n\t            var id = to.params.questId;\n\t            if (!this.questionnaire) {\n\t                this.questionnaireList.forEach(function (item) {\n\t                    if (parseInt(item.id) === parseInt(id)) {\n\t                        _this.setCurrentQuest(item);\n\t                        return;\n\t                    }\n\t                });\n\t            }\n\t            next();\n\t        }\n\t    }\n\t};\n\n/***/ },\n\n/***/ 32:\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div id=create v-if=!$loadingRouteData> <div class=quest> <div class=quest-title> <input type=text class=quest-title_input placeholder=请输入问卷的标题 v-model=questionnaire.title /> </div> <div v-for=\\\"questItem in questionnaire.questItemList\\\" class=questItem track-by=$index> <p class=questItem-title> <span>{{$index+1}}、{{typeMap[questItem.type]}}：</span> <span v-text=questItem.title></span> </p> <div v-if=\\\"questItem.type==='textarea'\\\"> <textarea></textarea> </div> <div v-else> <div v-for=\\\"selection in questItem.selections\\\" class=selection> <input :type=questItem.type :name=questItem.name :id=questItem.name+$index :class=questItem.type /> <label v-text=selection :for=questItem.name+$index></label> </div> </div> <div class=item-operation @click=\\\"handleItemOperation($event, questItem)\\\"> <button type=button v-if=\\\"$index != 0\\\" data-operation=up>上移</button> <button type=button v-if=\\\"$index != questionnaire.questItemList.length-1\\\" data-operation=down>下移</button> <button type=button data-operation=remove>删除</button> <button type=button data-operation=reuse>复用</button> </div> </div> <div class=add> <div class=add-items v-show=showSelections transition=expand @click.stop=addItem($event)> <span data-type=radio>单选题</span> <span class=middle data-type=checkbox>多选题</span> <span data-type=textarea>文本题</span> </div> <div class=add-button> <button type=button @click.stop=\\\"showSelections=!showSelections\\\">添加问题</button> </div> </div> </div> <div class=mask v-if=showMask> <div class=mask-prompt> <div class=prompt-header>请输入详细信息</div> <div class=prompt-body> <div> <label>问题名称：</label> <input type=text placeholder=请输入标题 v-el:item-title/> </div> <div> <label>选项：</label> <input type=text placeholder=请输入选项 v-el:item-selections :disabled=\\\"questItem.type === 'textarea'\\\"/> <p class=prompt>*&nbsp;不同选项之间请以空格隔开</p> </div> </div> <div class=prompt-footer @click.stop=handleInput($event)> <button type=button data-operation=confirm>确定</button> <button type=button data-operation=cancel>取消</button> </div> </div> </div> <div class=submit> <div class=deadline> <label>问卷截止日期：</label> <input type=text placeholder=点击选择问卷截止日期 readonly=readonly v-el:deadline :value=\\\"new Date(questionnaire.deadline).toLocaleDateString()\\\" @click.stop=\\\"showCalendar=!showCalendar\\\"/> <calendar :show-calendar.sync=showCalendar v-if=showCalendar></calendar> </div> <div @click=submit($event)> <button type=button data-operation=save>保存问卷</button> <button type=button data-operation=publish>发布问卷</button> </div> </div> </div> \";\n\n/***/ },\n\n/***/ 39:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__vue_script__ = __webpack_require__(17)\n\t__vue_template__ = __webpack_require__(32)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 1.build.js\n **/","<template>\r\n    <div id=\"calendar\">\r\n        <div class=\"calendar-selections\">\r\n            <span class=\"calendar-selections_last\"\r\n                @click=\"decrMonth\">\r\n                <i class=\"fa fa-chevron-left\"></i>\r\n            </span>\r\n            <select name=\"year\" class=\"calendar-selections_year\"\r\n                v-model=\"currentYear\">\r\n                <option v-for=\"year in yearList\">{{year}}</option>\r\n            </select>\r\n            <select class=\"calendar-selections_month\"\r\n                v-model=\"currentMonth\">\r\n                <option v-for=\"month in monthList\">{{month}}</option>\r\n            </select>\r\n            <span class=\"calendar-selelctions_next\"\r\n                @click=\"incrMonth\">\r\n                <i class=\"fa fa-chevron-right\"></i>\r\n            </span>\r\n        </div>\r\n        <table @click.stop=\"handleClick($event)\">\r\n            <thead>\r\n                <tr><th v-for=\"week in weekList\">{{week}}</th></tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"row in tableData\">\r\n                    <td v-for=\"date in row\"\r\n                        :class=\"{'not-current-month': date.getMonth()!==currentMonth-1}\"\r\n                        :data-date=\"date.getTime()\">\r\n                        {{date.getDate()}}\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>\r\n<script>\r\n    var date = new Date()\r\n\r\n    export default{\r\n        props: ['showCalendar'],\r\n        data() {\r\n            return {\r\n                weekList: ['日', '一', '二', '三', '四', '五', '六'],\r\n                currentYear: date.getFullYear(),\r\n                currentMonth: date.getMonth() + 1,\r\n            }\r\n        },\r\n        computed: {\r\n            yearList() {\r\n                let yearList = []\r\n                for(let i=1900; i<2051; i++) {\r\n                    yearList.push(i)\r\n                }\r\n                return yearList\r\n            },\r\n            monthList() {\r\n                let monthList = []\r\n                for(let i=1; i<=12; i++) {\r\n                    monthList.push(i)\r\n                }\r\n                return monthList\r\n            },\r\n            tableData() {\r\n                let currentDateList = [] //当前表中所显示的所有日期数据，存储的格式为毫秒数(getTime())\r\n                let date = new Date(this.currentYear, this.currentMonth-1, 1) //当前年月第一天的日期对象\r\n                let oneDayMilliseconds = 24*60*60*1000 // 一天的毫秒数\r\n                let dateWeek = date.getDay() // 当前年月第一天的星期\r\n                let firstDate = date.getTime() - dateWeek*oneDayMilliseconds // 当前表格第一格所显示日期的毫秒数\r\n                //按照6行7列存储时间数据（毫秒）\r\n                for(let i=0; i<6; i++) {\r\n                    currentDateList[i] = []\r\n                    for(let m=0; m<7; m++) {\r\n                        currentDateList[i].push(new Date(firstDate))\r\n                        firstDate += oneDayMilliseconds\r\n                    }\r\n                }\r\n                return currentDateList\r\n            }\r\n        },\r\n        methods: {\r\n            incrMonth() {\r\n                if(this.currentMonth === 12) {\r\n                    this.currentMonth = 1\r\n                    this.currentYear++\r\n                } else{\r\n                    this.currentMonth++\r\n                }\r\n            },\r\n            decrMonth() {\r\n                if(this.currentMonth === 1) {\r\n                    this.currentMonth = 12\r\n                    this.currentYear--\r\n                }else{\r\n                    this.currentMonth--\r\n                }\r\n            },\r\n            handleClick(event) {\r\n                if(event.target.dataset.date) {\r\n                    let date = new Date(parseInt(event.target.dataset.date))\r\n                    this.currentYear = date.getFullYear()\r\n                    this.currentMonth = date.getMonth() + 1\r\n                    // this.currentDate = date\r\n                    this.$dispatch(\"date-change\", date) // 把选中的 日期传给父组件，再通过父组件传给其他子组件\r\n                    this.showCalendar = false\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"less\">\r\n    @import \"../color\";\r\n\r\n    #calendar{\r\n        // display: none;\r\n        width: 300px;\r\n        // height: 200px;\r\n        border: 1px solid #ccc;\r\n        border-radius: 3px;\r\n        box-sizing: border-box;\r\n        padding: 10px;\r\n        font-size: 14px;\r\n        user-select: none;\r\n        .calendar-selections{\r\n            display: flex;\r\n            justify-content: space-around;\r\n            width: 100%;\r\n            height: 30px;\r\n            span{\r\n                display: inline-block;\r\n                height: 24px;\r\n                line-height: 24px;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n        .calendar-selections_year, .calendar-selections_month{\r\n            width: 90px;\r\n            height: 24px;\r\n            option{\r\n                text-align: center;\r\n            }\r\n        }\r\n        table{\r\n            width: 100%;\r\n            text-align: center;\r\n            border-collapse: collapse;\r\n        }\r\n        table, th, td{\r\n            border: none;\r\n        }\r\n        tr{\r\n            height: 26px;\r\n        }\r\n        td{\r\n            cursor: pointer;\r\n            transition: background-color .2s;\r\n        }\r\n        td:hover{\r\n            background-color: @light;\r\n        }\r\n        .not-current-month{\r\n            color: #aaa;\r\n        }\r\n    }\r\n</style>\n\n\n/** WEBPACK FOOTER **\n ** Calendar.vue?6125c850\n **/","exports = module.exports = require(\"./../../node_modules/.npminstall/css-loader/0.23.1/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#calendar{width:300px;border:1px solid #ccc;border-radius:3px;box-sizing:border-box;padding:10px;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#calendar .calendar-selections{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%;height:30px}#calendar .calendar-selections span{display:inline-block;height:24px;line-height:24px;cursor:pointer}#calendar .calendar-selections_month,#calendar .calendar-selections_year{width:90px;height:24px}#calendar .calendar-selections_month option,#calendar .calendar-selections_year option,#calendar table{text-align:center}#calendar table{width:100%;border-collapse:collapse}#calendar table,#calendar td,#calendar th{border:none}#calendar tr{height:26px}#calendar td{cursor:pointer;-webkit-transition:background-color .2s;transition:background-color .2s}#calendar td:hover{background-color:#cce5ff}#calendar .not-current-month{color:#aaa}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.npminstall/css-loader/0.23.1/css-loader!./~/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./~/.npminstall/less-loader/2.2.3/less-loader!./~/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./src/components/Calendar.vue\n ** module id = 6\n ** module chunks = 0 1\n **/","module.exports = \" <div id=calendar> <div class=calendar-selections> <span class=calendar-selections_last @click=decrMonth> <i class=\\\"fa fa-chevron-left\\\"></i> </span> <select name=year class=calendar-selections_year v-model=currentYear> <option v-for=\\\"year in yearList\\\">{{year}}</option> </select> <select class=calendar-selections_month v-model=currentMonth> <option v-for=\\\"month in monthList\\\">{{month}}</option> </select> <span class=calendar-selelctions_next @click=incrMonth> <i class=\\\"fa fa-chevron-right\\\"></i> </span> </div> <table @click.stop=handleClick($event)> <thead> <tr><th v-for=\\\"week in weekList\\\">{{week}}</th></tr> </thead> <tbody> <tr v-for=\\\"row in tableData\\\"> <td v-for=\\\"date in row\\\" :class=\\\"{'not-current-month': date.getMonth()!==currentMonth-1}\\\" :data-date=date.getTime()> {{date.getDate()}} </td> </tr> </tbody> </table> </div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.npminstall/vue-html-loader/1.2.3/vue-html-loader!./~/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=template&index=0!./src/components/Calendar.vue\n ** module id = 7\n ** module chunks = 0 1\n **/","var __vue_script__, __vue_template__\nrequire(\"!!vue-style-loader!css-loader!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!less!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./Calendar.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=script&index=0!./Calendar.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=template&index=0!./Calendar.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/Calendar.vue\n ** module id = 8\n ** module chunks = 0 1\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/.npminstall/css-loader/0.23.1/css-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./../../node_modules/.npminstall/less-loader/2.2.3/less-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./Calendar.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/.npminstall/vue-style-loader/1.0.0/vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/.npminstall/css-loader/0.23.1/css-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./../../node_modules/.npminstall/less-loader/2.2.3/less-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./Calendar.vue\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/.npminstall/css-loader/0.23.1/css-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./../../node_modules/.npminstall/less-loader/2.2.3/less-loader/index.js!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./Calendar.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.npminstall/vue-style-loader/1.0.0/vue-style-loader!./~/.npminstall/css-loader/0.23.1/css-loader!./~/.npminstall/vue-loader/8.5.3/vue-loader/lib/style-rewriter.js!./~/.npminstall/less-loader/2.2.3/less-loader!./~/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=style&index=0!./src/components/Calendar.vue\n ** module id = 9\n ** module chunks = 0 1\n **/","<template>\r\n    <div id=\"create\" v-if=\"!$loadingRouteData\">\r\n        <div class=\"quest\">\r\n            <div class=\"quest-title\">\r\n                <input type=\"text\" class=\"quest-title_input\" placeholder=\"请输入问卷的标题\"\r\n                    v-model=\"questionnaire.title\" />\r\n            </div>\r\n            <div v-for=\"questItem in questionnaire.questItemList\" class=\"questItem\" track-by=\"$index\">\r\n                <p class=\"questItem-title\">\r\n                    <span>{{$index+1}}、{{typeMap[questItem.type]}}：</span>\r\n                    <span v-text=\"questItem.title\"></span>\r\n                </p>\r\n                <div v-if=\"questItem.type==='textarea'\">\r\n                    <textarea></textarea>\r\n                </div>\r\n                <div v-else>\r\n                    <div v-for=\"selection in questItem.selections\" class=\"selection\">\r\n                        <input :type=\"questItem.type\" :name=\"questItem.name\" \r\n                            :id=\"questItem.name+$index\"\r\n                            :class=\"questItem.type\"/>\r\n                        <label v-text=\"selection\" :for=\"questItem.name+$index\"></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"item-operation\" @click=\"handleItemOperation($event, questItem)\">\r\n                    <button type=\"button\" v-if=\"$index != 0\" data-operation=\"up\">上移</button>\r\n                    <button type=\"button\" v-if=\"$index != questionnaire.questItemList.length-1\"\r\n                        data-operation=\"down\">下移</button>\r\n                    <button type=\"button\" data-operation=\"remove\">删除</button>\r\n                    <button type=\"button\" data-operation=\"reuse\">复用</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"add\">\r\n                <div class=\"add-items\" \r\n                    v-show=\"showSelections\"\r\n                    transition=\"expand\"\r\n                    @click.stop=\"addItem($event)\">\r\n                    <span data-type=\"radio\">单选题</span>\r\n                    <span class=\"middle\" data-type=\"checkbox\">多选题</span>\r\n                    <span data-type=\"textarea\">文本题</span>\r\n                </div>\r\n                <div class=\"add-button\">\r\n                    <button type=\"button\" @click.stop=\"showSelections=!showSelections\">添加问题</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"mask\" v-if=\"showMask\">\r\n            <div class=\"mask-prompt\">\r\n                <div class=\"prompt-header\">请输入详细信息</div>\r\n                <div class=\"prompt-body\">\r\n                    <div>\r\n                        <label>问题名称：</label>\r\n                        <input type=\"text\" placeholder=\"请输入标题\" v-el:item-title />\r\n                    </div>\r\n                    <div>\r\n                        <label>选项：</label>\r\n                        <input type=\"text\" placeholder=\"请输入选项\" v-el:item-selections \r\n                            :disabled=\"questItem.type === 'textarea'\" />\r\n                        <p class=\"prompt\">*&nbsp;不同选项之间请以空格隔开</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"prompt-footer\" @click.stop=\"handleInput($event)\">\r\n                    <button type=\"button\" data-operation=\"confirm\">确定</button>\r\n                    <button type=\"button\" data-operation=\"cancel\">取消</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"submit\">\r\n            <div class=\"deadline\">\r\n                <label>问卷截止日期：</label>\r\n                <input type=\"text\" placeholder=\"点击选择问卷截止日期\" readonly \r\n                    v-el:deadline\r\n                    :value=\"new Date(questionnaire.deadline).toLocaleDateString()\"\r\n                    @click.stop=\"showCalendar=!showCalendar\"/>\r\n                <Calendar :show-calendar.sync=\"showCalendar\" v-if=\"showCalendar\"></Calendar>\r\n            </div>\r\n            <div @click=\"submit($event)\">\r\n                <button type=\"button\" data-operation=\"save\">保存问卷</button>\r\n                <button type=\"button\" data-operation=\"publish\">发布问卷</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import Calendar from './Calendar'\r\n\r\n    export default{\r\n        data() {\r\n            return {\r\n                showSelections: false,\r\n                showMask: false,\r\n                showCalendar: false,\r\n                questItem: {},\r\n                typeMap: {\r\n                    radio: '单选',\r\n                    checkbox: '多选',\r\n                    textarea: '问答'\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            // 添加问题的类型\r\n            addItem(event) {\r\n                let target = event.target\r\n                if(target.nodeName.toLowerCase() === 'span') {\r\n                    this.showMask = true    // 显示弹出框\r\n                    this.questItem.type = target.dataset.type   // 设置问题的类型\r\n                }\r\n            },\r\n            // 处理弹出框中的点击事件\r\n            handleInput(event) {\r\n                let target = event.target\r\n                if(target.nodeName.toLowerCase() !== 'button') {\r\n                    return\r\n                }\r\n                let itemTitle = this.$els.itemTitle\r\n                let itemSelections = this.$els.itemSelections\r\n                if(target.dataset.operation === \"confirm\") {\r\n                    if(this.questItem.type === \"textarea\") {\r\n                        this.addTextarea(itemTitle)\r\n                    } else {\r\n                        this.addSelections(itemTitle, itemSelections)\r\n                    }\r\n                } else {\r\n                    this.handleCancel()\r\n                }\r\n            },\r\n            // 添加文本问题\r\n            addTextarea(itemTitle) {\r\n                if(itemTitle.value.trim() === '') {\r\n                    return\r\n                }\r\n                this.questItem.title = itemTitle.value.trim()\r\n                this.questionnaire.questItemList.push(this.questItem)\r\n                this.handleCancel()\r\n            },\r\n            // 添加选项问题\r\n            addSelections(itemTitle, itemSelections) {\r\n                if(itemTitle.value.trim() === '' || itemSelections.value.trim() === '') {\r\n                    return\r\n                }\r\n                this.questItem.title = itemTitle.value.trim()\r\n                this.questItem.selections = itemSelections.value.trim().split(/\\s+/)\r\n                this.questItem.name = Date.now()\r\n                this.questionnaire.questItemList.push(this.questItem)\r\n                this.handleCancel()\r\n            },\r\n            // 处理取消事件\r\n            handleCancel() {\r\n                this.$els.itemTitle.value = ''\r\n                this.$els.itemSelections.value = ''\r\n                this.questItem = {}\r\n                this.showMask = false\r\n            },\r\n            // 处理上移、下移、删除和复用操作\r\n            handleItemOperation(event, questItem) {\r\n                let operation = event.target.dataset.operation\r\n                switch(operation) {\r\n                    case 'up':\r\n                        this.moveUp(questItem)\r\n                        break\r\n                    case 'down':\r\n                        this.moveDown(questItem)\r\n                        break\r\n                    case 'remove':\r\n                        this.removeQuestItem(questItem)\r\n                        break\r\n                    case 'reuse':\r\n                        this.reuseQuestItem(questItem)\r\n                        break\r\n                    default: \r\n                        throw new Error(\"该操作\" + \"operation\" + \"不存在！\")\r\n                }\r\n            },\r\n            // 上移\r\n            moveUp(questItem) {\r\n                let index = this.questionnaire.questItemList.indexOf(questItem)\r\n                this.questionnaire.questItemList.$remove(questItem)\r\n                this.questionnaire.questItemList.splice(index-1, 0, questItem)\r\n            },\r\n            // 下移，其实就是把后边那个上移\r\n            moveDown(questItem) {\r\n                let index = this.questionnaire.questItemList.indexOf(questItem)\r\n                this.moveUp(this.questionnaire.questItemList[index+1])\r\n            },\r\n            // 删除\r\n            removeQuestItem(questItem) {\r\n                this.questionnaire.questItemList.$remove(questItem)\r\n            },\r\n            // 复用\r\n            reuseQuestItem(questItem) {\r\n                let index = this.questionnaire.questItemList.indexOf(questItem)\r\n                // 为了完整的克隆一个对象，先把对象转换成JSON，再转换成对象\r\n                let newQuestItem = JSON.parse(JSON.stringify(questItem))\r\n                if(newQuestItem.type !== 'textarea') {\r\n                    newQuestItem.name = Date.now()\r\n                }\r\n                this.questionnaire.questItemList.splice(index+1, 0, newQuestItem)\r\n            },\r\n            // 处理提交\r\n            submit(event) {\r\n                let operation = event.target.dataset.operation\r\n                let oneDayTime = 24*60*60*1000\r\n                if(this.questionnaire.title.trim() === '') {\r\n                    alert(\"问卷的标题不能为空！\")\r\n                    return\r\n                }\r\n                if(this.questionnaire.questItemList.length === 0) {\r\n                    alert(\"请至少设置一个问题！\")\r\n                    return\r\n                }\r\n                if(!this.questionnaire.deadline || this.questionnaire.deadline<Date.now()) {\r\n                    alert(\"问卷的截止时间必须在今天之后！\")\r\n                    return\r\n                }\r\n                if(operation === 'save') {\r\n                    this.save()\r\n                } else {\r\n                    this.publish()\r\n                }\r\n            }\r\n        },\r\n        components: {\r\n            Calendar\r\n        },\r\n        events: {\r\n            'date-change': function(msg) {\r\n                let date = new Date(msg)\r\n                this.$els.deadline.value = date.toLocaleDateString()\r\n                this.questionnaire.deadline = date.getTime()\r\n            }\r\n        },\r\n        vuex: {\r\n            actions: {\r\n                save({dispatch}) {\r\n                    this.questionnaire.state = \"未发布\"\r\n                    dispatch('UPDATE_QUEST', this.questionnaire)\r\n                    this.$router.go(`/preview/${this.questionnaire.id}`)\r\n                },\r\n                publish({dispatch}) {\r\n                    this.questionnaire.state = \"已发布\"\r\n                    dispatch('UPDATE_QUEST', this.questionnaire)\r\n                    this.$router.go(`/preview/${this.questionnaire.id}`)\r\n                },\r\n                setCurrentQuest({dispatch}, item) {\r\n                    dispatch(\"SET_QUEST\", item)\r\n                }\r\n            },\r\n            getters: {\r\n                questionnaire: state => state.currentQuestionnaire,\r\n                questionnaireList: state => state.questionnaireList\r\n            }\r\n        },\r\n        route: {\r\n            data({to, next}) {\r\n                let id = to.params.questId\r\n                if(!this.questionnaire) {\r\n                    this.questionnaireList.forEach(item => {\r\n                        if(parseInt(item.id) === parseInt(id)) {\r\n                            this.setCurrentQuest(item)\r\n                            return\r\n                        }\r\n                    })\r\n                }\r\n                next()\r\n            }\r\n        }\r\n    }\r\n</script>\n\n\n/** WEBPACK FOOTER **\n ** Edit.vue?0f669ee4\n **/","module.exports = \" <div id=create v-if=!$loadingRouteData> <div class=quest> <div class=quest-title> <input type=text class=quest-title_input placeholder=请输入问卷的标题 v-model=questionnaire.title /> </div> <div v-for=\\\"questItem in questionnaire.questItemList\\\" class=questItem track-by=$index> <p class=questItem-title> <span>{{$index+1}}、{{typeMap[questItem.type]}}：</span> <span v-text=questItem.title></span> </p> <div v-if=\\\"questItem.type==='textarea'\\\"> <textarea></textarea> </div> <div v-else> <div v-for=\\\"selection in questItem.selections\\\" class=selection> <input :type=questItem.type :name=questItem.name :id=questItem.name+$index :class=questItem.type /> <label v-text=selection :for=questItem.name+$index></label> </div> </div> <div class=item-operation @click=\\\"handleItemOperation($event, questItem)\\\"> <button type=button v-if=\\\"$index != 0\\\" data-operation=up>上移</button> <button type=button v-if=\\\"$index != questionnaire.questItemList.length-1\\\" data-operation=down>下移</button> <button type=button data-operation=remove>删除</button> <button type=button data-operation=reuse>复用</button> </div> </div> <div class=add> <div class=add-items v-show=showSelections transition=expand @click.stop=addItem($event)> <span data-type=radio>单选题</span> <span class=middle data-type=checkbox>多选题</span> <span data-type=textarea>文本题</span> </div> <div class=add-button> <button type=button @click.stop=\\\"showSelections=!showSelections\\\">添加问题</button> </div> </div> </div> <div class=mask v-if=showMask> <div class=mask-prompt> <div class=prompt-header>请输入详细信息</div> <div class=prompt-body> <div> <label>问题名称：</label> <input type=text placeholder=请输入标题 v-el:item-title/> </div> <div> <label>选项：</label> <input type=text placeholder=请输入选项 v-el:item-selections :disabled=\\\"questItem.type === 'textarea'\\\"/> <p class=prompt>*&nbsp;不同选项之间请以空格隔开</p> </div> </div> <div class=prompt-footer @click.stop=handleInput($event)> <button type=button data-operation=confirm>确定</button> <button type=button data-operation=cancel>取消</button> </div> </div> </div> <div class=submit> <div class=deadline> <label>问卷截止日期：</label> <input type=text placeholder=点击选择问卷截止日期 readonly=readonly v-el:deadline :value=\\\"new Date(questionnaire.deadline).toLocaleDateString()\\\" @click.stop=\\\"showCalendar=!showCalendar\\\"/> <calendar :show-calendar.sync=showCalendar v-if=showCalendar></calendar> </div> <div @click=submit($event)> <button type=button data-operation=save>保存问卷</button> <button type=button data-operation=publish>发布问卷</button> </div> </div> </div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/.npminstall/vue-html-loader/1.2.3/vue-html-loader!./~/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=template&index=0!./src/components/Edit.vue\n ** module id = 32\n ** module chunks = 1\n **/","var __vue_script__, __vue_template__\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=script&index=0!./Edit.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/.npminstall/vue-loader/8.5.3/vue-loader/lib/selector.js?type=template&index=0!./Edit.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/Edit.vue\n ** module id = 39\n ** module chunks = 1\n **/"],"sourceRoot":""}