webpackJsonp([0,4],{4:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new Date;t["default"]={props:["showCalendar"],data:function(){return{weekList:["日","一","二","三","四","五","六"],currentYear:i.getFullYear(),currentMonth:i.getMonth()+1}},computed:{yearList:function a(){for(var a=[],e=1900;e<2051;e++)a.push(e);return a},monthList:function n(){for(var n=[],e=1;e<=12;e++)n.push(e);return n},tableData:function(){for(var e=[],t=new Date(this.currentYear,this.currentMonth-1,1),i=864e5,a=t.getDay(),n=t.getTime()-a*i,r=0;r<6;r++){e[r]=[];for(var o=0;o<7;o++)e[r].push(new Date(n)),n+=i}return e}},methods:{incrMonth:function(){12===this.currentMonth?(this.currentMonth=1,this.currentYear++):this.currentMonth++},decrMonth:function(){1===this.currentMonth?(this.currentMonth=12,this.currentYear--):this.currentMonth--},handleClick:function(e){if(e.target.dataset.date){var t=new Date(parseInt(e.target.dataset.date));this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()+1,this.$dispatch("date-change",t),this.showCalendar=!1}}}}},6:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,"#calendar{width:300px;border:1px solid #ccc;border-radius:3px;box-sizing:border-box;padding:10px;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#calendar .calendar-selections{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%;height:30px}#calendar .calendar-selections span{display:inline-block;height:24px;line-height:24px;cursor:pointer}#calendar .calendar-selections_month,#calendar .calendar-selections_year{width:90px;height:24px}#calendar .calendar-selections_month option,#calendar .calendar-selections_year option,#calendar table{text-align:center}#calendar table{width:100%;border-collapse:collapse}#calendar table,#calendar td,#calendar th{border:none}#calendar tr{height:26px}#calendar td{cursor:pointer;-webkit-transition:background-color .2s;transition:background-color .2s}#calendar td:hover{background-color:#cce5ff}#calendar .not-current-month{color:#aaa}",""])},7:function(e,t){e.exports=' <div id=calendar> <div class=calendar-selections> <span class=calendar-selections_last @click=decrMonth> <i class="fa fa-chevron-left"></i> </span> <select name=year class=calendar-selections_year v-model=currentYear> <option v-for="year in yearList">{{year}}</option> </select> <select class=calendar-selections_month v-model=currentMonth> <option v-for="month in monthList">{{month}}</option> </select> <span class=calendar-selelctions_next @click=incrMonth> <i class="fa fa-chevron-right"></i> </span> </div> <table @click.stop=handleClick($event)> <thead> <tr><th v-for="week in weekList">{{week}}</th></tr> </thead> <tbody> <tr v-for="row in tableData"> <td v-for="date in row" :class="{\'not-current-month\': date.getMonth()!==currentMonth-1}" :data-date=date.getTime()> {{date.getDate()}} </td> </tr> </tbody> </table> </div> '},8:function(e,t,i){var a,n;i(9),a=i(4),n=i(7),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},9:function(e,t,i){var a=i(6);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)},15:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),r=a(n),o=i(8),s=a(o);t["default"]={data:function(){return{showSelections:!1,showMask:!1,showCalendar:!1,questionnaire:{title:"",deadline:"",state:"",questItemList:[]},questItem:{},typeMap:{radio:"单选",checkbox:"多选",textarea:"问答"}}},methods:{addItem:function(e){var t=e.target;"span"===t.nodeName.toLowerCase()&&(this.showMask=!0,this.questItem.type=t.dataset.type)},handleInput:function(e){var t=e.target;if("button"===t.nodeName.toLowerCase()){var i=this.$els.itemTitle,a=this.$els.itemSelections;"confirm"===t.dataset.operation?"textarea"===this.questItem.type?this.addTextarea(i):this.addSelections(i,a):this.handleCancel()}},addTextarea:function(e){""!==e.value.trim()&&(this.questItem.title=e.value.trim(),this.questionnaire.questItemList.push(this.questItem),this.handleCancel())},addSelections:function(e,t){""!==e.value.trim()&&""!==t.value.trim()&&(this.questItem.title=e.value.trim(),this.questItem.selections=t.value.trim().split(/\s+/),this.questItem.name=Date.now(),this.questionnaire.questItemList.push(this.questItem),this.handleCancel())},handleCancel:function(){this.$els.itemTitle.value="",this.$els.itemSelections.value="",this.questItem={},this.showMask=!1},handleItemOperation:function(e,t){var i=e.target.dataset.operation;switch(i){case"up":this.moveUp(t);break;case"down":this.moveDown(t);break;case"remove":this.removeQuestItem(t);break;case"reuse":this.reuseQuestItem(t);break;default:throw new Error("该操作operation不存在！")}},moveUp:function(e){var t=this.questionnaire.questItemList.indexOf(e);this.questionnaire.questItemList.$remove(e),this.questionnaire.questItemList.splice(t-1,0,e)},moveDown:function(e){var t=this.questionnaire.questItemList.indexOf(e);this.moveUp(this.questionnaire.questItemList[t+1])},removeQuestItem:function(e){this.questionnaire.questItemList.$remove(e)},reuseQuestItem:function(e){var t=this.questionnaire.questItemList.indexOf(e),i=JSON.parse((0,r["default"])(e));"textarea"!==i.type&&(i.name=Date.now()),this.questionnaire.questItemList.splice(t+1,0,i)},submit:function(e){var t=e.target.dataset.operation;return""===this.questionnaire.title.trim()?void alert("问卷的标题不能为空！"):0===this.questionnaire.questItemList.length?void alert("请至少设置一个问题！"):!this.questionnaire.deadline||this.questionnaire.deadline<Date.now()?void alert("问卷的截止时间必须在今天之后！"):void("save"===t?this.save():this.publish())}},components:{Calendar:s["default"]},events:{"date-change":function(e){var t=new Date(e);this.$els.deadline.value=t.toLocaleDateString(),this.questionnaire.deadline=t.getTime()}},vuex:{actions:{save:function(e){var t=e.dispatch;this.questionnaire.state="未发布",this.questionnaire.id=Date.now(),t("ADD_QUEST",this.questionnaire),this.$router.go("/preview/"+this.questionnaire.id)},publish:function(e){var t=e.dispatch;this.questionnaire.state="已发布",this.questionnaire.id||(this.questionnaire.id=Date.now()),t("ADD_QUEST",this.questionnaire),this.$router.go("/preview/"+this.questionnaire.id)}}}}},23:function(e,t,i){t=e.exports=i(1)(),t.push([e.id,"#create{width:10rem;border:.03rem solid #ccc;border-radius:.05rem;margin:.4rem auto;font-size:.16rem;box-sizing:border-box;padding:.1rem .2rem}#create .item-operation{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}#create .item-operation button{width:.4rem;padding:.05rem 0;margin-right:.1rem;border-radius:.02rem}#create .questItem:hover{background-color:#cce5ff}#create .deadline{position:relative}#create #calendar{position:absolute;top:-240px;left:0;background-color:#fff}#create .deadline input{width:1.5rem;padding-left:.1rem;height:.25rem;border-radius:.02rem;border:1px solid #ccc}#create .submit{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:.2rem}#create .submit button{width:.9rem;background-color:#007fff;margin-right:.2rem;padding:.1rem 0;color:#fff;border-radius:.03rem}#create .submit button:hover{background-color:#cce5ff;color:#555}#create .questItem{padding:.15rem .2rem;font-size:.17rem;-webkit-transition:background-color .1s;transition:background-color .1s}#create .questItem textarea{resize:none;width:3.3rem;height:1.7rem;border-radius:.03rem}#create .questItem-title{margin-bottom:.15rem}#create .questItem-title+div{margin-left:.2rem}#create .selection{margin-bottom:.15rem}#create .mask-prompt{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;position:absolute;width:4rem;height:2rem;top:40%;left:50%;margin-left:-2rem;margin-top:-1rem}#create .prompt{font-size:.12px;text-align:center;margin-top:.1rem}#create .prompt-header{width:100%;background-color:#007fff;height:.3rem;text-align:center;line-height:.3rem;color:#fff;font-weight:700;font-size:.18rem}#create .prompt-body{background-color:#fff;-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:distribute;justify-content:space-around;padding:0 .5rem}#create .prompt-body label{display:inline-block;width:.85rem;text-align:right}#create .prompt-footer{height:.3rem;background-color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;align-item:center;padding:.1rem .5rem}#create .prompt-footer button{background-color:#007fff;text-align:center;width:.7rem;color:#fff;border-radius:.03rem}#create .mask{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(0,0,0,.15);z-index:10}#create .expand-transition{-webkit-transition:all .3s;transition:all .3s;width:100%;height:.3rem;overflow:hidden}#create .expand-enter,#create .expand-leave{height:0;opacity:0}#create .quest{border-bottom:2px solid #ccc}#create .quest-title_input{width:100%;height:.3rem;border:none;font-size:.25rem;text-align:center;font-weight:700;letter-spacing:.05rem}#create .quest-title{border-bottom:.02rem solid #ccc;padding-bottom:.1rem}#create .add{width:95%;margin:.1rem auto;border:.01px solid #ccc;padding:.1rem 0}#create .add-button{margin-top:.1rem}#create .add-button button{display:block;width:100%;background-color:#ddd;border-radius:3px;padding:.2rem 0;color:#444;font-size:.23rem;-webkit-transition:background-color .1s;transition:background-color .1s}#create .add-button button:hover{background-color:#efefef}#create .add-items{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}#create .add-items span{background-color:#ddd;color:#444;cursor:pointer;width:.85rem;text-align:center;padding:.05rem 0;border-radius:.02rem}#create .add-items span:hover{background-color:#efefef}#create .middle{margin:0 .4rem}",""])},30:function(e,t){e.exports=' <div id=create> <div class=quest> <div class=quest-title> <input type=text class=quest-title_input placeholder=请输入问卷的标题 v-model=questionnaire.title /> </div> <div v-for="questItem in questionnaire.questItemList" class=questItem track-by=$index> <p class=questItem-title> <span>{{$index+1}}、{{typeMap[questItem.type]}}：</span> <span v-text=questItem.title></span> </p> <div v-if="questItem.type===\'textarea\'"> <textarea></textarea> </div> <div v-else> <div v-for="selection in questItem.selections" class=selection> <input :type=questItem.type :name=questItem.name :id=questItem.name+$index :class=questItem.type /> <label v-text=selection :for=questItem.name+$index></label> </div> </div> <div class=item-operation @click="handleItemOperation($event, questItem)"> <button type=button v-if="$index != 0" data-operation=up>上移</button> <button type=button v-if="$index != questionnaire.questItemList.length-1" data-operation=down>下移</button> <button type=button data-operation=remove>删除</button> <button type=button data-operation=reuse>复用</button> </div> </div> <div class=add> <div class=add-items v-show=showSelections transition=expand @click.stop=addItem($event)> <span data-type=radio>单选题</span> <span class=middle data-type=checkbox>多选题</span> <span data-type=textarea>文本题</span> </div> <div class=add-button> <button type=button @click.stop="showSelections=!showSelections">添加问题</button> </div> </div> </div> <div class=mask v-if=showMask> <div class=mask-prompt> <div class=prompt-header>请输入详细信息</div> <div class=prompt-body> <div> <label>问题名称：</label> <input type=text placeholder=请输入标题 v-el:item-title/> </div> <div> <label>选项：</label> <input type=text placeholder=请输入选项 v-el:item-selections :disabled="questItem.type === \'textarea\'"/> <p class=prompt>*&nbsp;不同选项之间请以空格隔开</p> </div> </div> <div class=prompt-footer @click.stop=handleInput($event)> <button type=button data-operation=confirm>确定</button> <button type=button data-operation=cancel>取消</button> </div> </div> </div> <div class=submit> <div class=deadline> <label>问卷截止日期：</label> <input type=text placeholder=点击选择问卷截止日期 readonly=readonly v-el:deadline @click.stop="showCalendar=!showCalendar"/> <calendar :show-calendar.sync=showCalendar v-if=showCalendar></calendar> </div> <div @click=submit($event)> <button type=button data-operation=save>保存问卷</button> <button type=button data-operation=publish>发布问卷</button> </div> </div> </div> '},37:function(e,t,i){var a,n;i(43),a=i(15),n=i(30),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),n&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=n)},43:function(e,t,i){var a=i(23);"string"==typeof a&&(a=[[e.id,a,""]]);i(2)(a,{});a.locals&&(e.exports=a.locals)}});
//# sourceMappingURL=0.build.js.map